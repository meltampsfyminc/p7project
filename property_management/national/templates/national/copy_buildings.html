{% extends "national/base.html" %}

{% block title %}Copy Buildings - {{ report.year }}{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h2>Copy Buildings from {{ prev_report.year }} to {{ report.year }}</h2>
    </div>
    
    <div class="card-body">
        {% if has_existing %}
        <div class="alert alert-warning">
            <h4>⚠️ Existing Data Found</h4>
            <p>This report already contains building data. Copying will add to the existing data.</p>
        </div>
        {% endif %}
        
        <div class="building-summary">
            <h3>Buildings to be copied from {{ prev_report.year }}:</h3>
            
            <div class="summary-grid">
                <div class="summary-item">
                    <div class="summary-count">{{ pastoral_count }}</div>
                    <div class="summary-label">Pastoral Houses</div>
                </div>
                
                <div class="summary-item">
                    <div class="summary-count">{{ office_count }}</div>
                    <div class="summary-label">Office Buildings</div>
                </div>
                
                <div class="summary-item">
                    <div class="summary-count">{{ other_count }}</div>
                    <div class="summary-label">Other Buildings</div>
                </div>
                
                <div class="summary-item">
                    <div class="summary-count">{{ chapel_count }}</div>
                    <div class="summary-label">Chapels</div>
                </div>
            </div>
            
            <div class="copy-details">
                <h4>What will be copied:</h4>
                <ul>
                    <li>All building descriptions and classes</li>
                    <li>Building dates</li>
                    <li><strong>Current year values will become "old_cost" in the new report</strong></li>
                    <li>Additions and deductions will be reset to zero</li>
                </ul>
            </div>
        </div>
        
        <form method="post">
            {% csrf_token %}
            
            <div class="form-actions">
                <button type="submit" class="btn btn-success btn-lg">
                    ✅ Copy {{ pastoral_count|add:office_count|add:other_count|add:chapel_count }} Buildings
                </button>
                <a href="{% url 'national:report_detail' report.id %}" class="btn btn-secondary">
                    Cancel
                </a>
            </div>
        </form>
    </div>
</div>

<style>
.building-summary {
    background-color: #f8f9fa;
    padding: 2rem;
    border-radius: 8px;
    margin-bottom: 2rem;
}

.building-summary h3 {
    margin-top: 0;
    margin-bottom: 2rem;
    color: #2c3e50;
    text-align: center;
}

.summary-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
}

.summary-item {
    background: white;
    padding: 1.5rem;
    border-radius: 8px;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.summary-count {
    font-size: 2.5rem;
    font-weight: bold;
    color: #3498db;
    margin-bottom: 0.5rem;
}

.summary-label {
    color: #7f8c8d;
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.copy-details {
    background: white;
    padding: 1.5rem;
    border-radius: 8px;
    margin-top: 2rem;
}

.copy-details h4 {
    margin-top: 0;
    color: #2c3e50;
}

.copy-details ul {
    padding-left: 1.5rem;
    margin: 1rem 0;
}

.copy-details li {
    margin-bottom: 0.5rem;
}

.btn-lg {
    padding: 1rem 2rem;
    font-size: 1.1rem;
}
</style>
{% endblock %}